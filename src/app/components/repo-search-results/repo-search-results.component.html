<div class="loading-indicator"
     *ngIf="loading; else showResults">
  <div>
    <mat-spinner [mode]="'indeterminate'" [diameter]="50"></mat-spinner>
  </div>
</div>

<ng-template #showResults>

  <table mat-table
         [dataSource]="results$"
         class="search-results">

    <ng-container *ngFor="let column of (columns|keyvalue)"
                  [matColumnDef]="column.key">
      <th mat-header-cell
          *matHeaderCellDef> {{column.value}} </th>
      <td mat-cell
          *matCellDef="let row"> {{row[column.key]}} </td>
    </ng-container>


    <tr mat-header-row
        *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row
        class="clickable"
        [routerLink]="['repo',row.id]"
        *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

</ng-template>